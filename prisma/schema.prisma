// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}


model Supplier {
    id Int @id @default(autoincrement())
    name String
    email String @unique
    chemicals Chemical[]
}

model Chemical {
    id Int @id @default(autoincrement())
    name String
    nomenclatureName String?
    stockQuantity Float // Float chosen to allow fractional quantities. Only use one unit for different states of material (ie. g for solid, ml for liquids. these can be converted client side to more readable units.)
    quantityType QuantityType 
    unit String? // Allows for extra details (e.g. cinammon "sticks")
    createdAt DateTime @default(now())
    modifiedAt DateTime @updatedAt
    status Status
    supplierId Int
    supplier Supplier @relation(fields: [supplierId], references: [id])
    locationId Int?  // Optional as it may not yet be approved.
    location Location? @relation(fields: [locationId], references: [id])
    hazardClassId Int?  // May not be hazardous.
    hazardClass HazardClass? @relation(fields: [hazardClassId], references: [id])
    @@index([name])
    @@index([status])
}

model Location {
    id Int @id @default(autoincrement())
    address String
    code    String  // Post code, zip code.
    town    String
    country String
    chemicals Chemical[]
}

model HazardClass {
    id Int @id @default(autoincrement())
    classification String
    chemicals Chemical[]
}


enum QuantityType {
    MASS
    VOLUME
    COUNT
}

enum Status {
    REQUESTED
    APPROVED
    DISPENSED
    ARCHIVED
}